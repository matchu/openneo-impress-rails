- title "Support Dress to Impress"

= campaign_progress(:always => true) do
  We've received
  = precede '$' do
    %span.campaign-raised
  toward our hosting costs this year. Thanks so much!

= form_tag donations_path, method: 'POST', id: 'donation-form',
    'data-checkout-image' => image_path('default-preview.png') do
  = hidden_field_tag 'donation[stripe_token]'
  %header
    %p#donation-form-title
      Thanks for supporting Dress to Impress!
    %p#donation-form-subtitle
      All donations go directly to our hosting costs. Thanks for your help!
  %div
    = precede '$' do
      = text_field_tag 'amount', '10.00'
    %button{:type => 'submit'} Donate now!

#description
  :markdown
    **Dress to Impress is cool!** We have loads of fancy features: we're
    constantly adding models to our database, we help folks make NC trades, and
    you can easily save your outfits and share them across the interwebs.
    It's pretty sweet.

    **But cool features cost money.** We're running on a cool
    [4GB Linode server][linode] for $40/mo, and y'all's fancy outfit thumbnails
    live on [Amazon Web Services][aws] for about $25/mo (it varies by usage),
    so that leaves us at about $65/mo. Add in $10 for the domain name and our
    Amazon costs being on the rise, and that rounds to an annual
    budget of $800.

    **So, we're here to ask for help.** If you have some spare change to send
    our way, we'll gladly accept
    <img src="http://images.neopets.com/neoboards/smilies/grin.gif" />
    Thanks for helping Dress to Impress stay online and running smoothly!

    **And, as a thank-you gift, we'll feature your outfits here!** Eeyup, for
    every $5 you send our way, we'll post one of your beautiful outfits right
    here, and feature it on the homepage, too! Personally, I'm looking forward
    to seeing all your lovely creations, and wishing I could make things
    even [half as pretty][matts_bat]
    <img src="http://images.neopets.com/neoboards/smilies/tongue.gif" />
    (See the fine print at the bottom of the page for details.)

    **Thanks again for all your help.** Dress to Impress runs on you, from our
    data to our servers. You make this site the great resource that it is, and
    I'm consistently impressed by this community's generosity. Thanks for 
    all you do!

    [linode]: https://www.linode.com/pricing
    [aws]: http://aws.amazon.com/
    [matts_bat]: http://www.neopets.com/petlookup.phtml?pet=matts_bat

%h2 Thanks to our lovely donors!

%ul#outfits
  = Outfit.includes(:user).find_each do |outfit| # TODO: donors only
    = outfit_li_for(outfit) do
      - if outfit.image?
        = link_to image_tag(outfit.image.small.url), outfit

      %header
        - if outfit.user
          Thanks, #{outfit.user.name}!
        - else
          Thanks, anonymous!

#fine-print
  %h2 Some notes on featured outfits
  :markdown
    When you make a donation, we'll divide the amount by $5, and, rounding
    down, that's how many of your outifts we'll feature. Cool, eh?

    This is our way of publicly thanking our donors.
    (Thanks again, by the way!)
    We love them very much and want to bring attention to their awesomeness.
    However, there are a few important bits of legal whatnot to keep in mind.
    (Mostly, it's the list of things that we expect to do but in no legally
    binding way promise to do. Just in case
    <img src="http://images.neopets.com/neoboards/smilies/tongue.gif" />)

    Featuring your outfit is a thank-you gift that we like to give our donors;
    it is *not* a purchased service. We offer no guarantee that we'll post your
    outfit on any page for any particular amount of time, or even at all.
    (That said, we expect to publicly list our donors' outfits somewhere on the
    site for as long as it lives, and in rotation on the homepage until some
    other site event or feature needs the space.)

    We reserve the right to refuse to post any outfit for any reason, and we
    reserve the right to remove any previously posted outfit for any reason.
    (That said, so long as your outfit is appropriate for Neopians of all ages,
    we don't expect any trouble.)

    If you change your mind about donating, no worries: we'll refund any
    donation within 30 days of the moment you donated.
    (Please don't be that person who repeatedly donates and refunds.
    We'll stop posting your outfits
    <img src="http://images.neopets.com/neoboards/smilies/tongue.gif" />)

    **TL;DR: We love to help and acknowledge our good-faith donors,
    but reserve the right not to do those things,
    in order to better handle bad-faith donors and unexpected circumstances.**
    Huh. That was way simpler.
    Maybe I should've just written that in the first place.

- content_for :javascripts do
  = javascript_include_tag 'https://checkout.stripe.com/checkout.js',
      'static/donate.js'
